ÂëΩ‰ª§Á®øÂïüÂãïÊñº 2016Âπ¥09Êúà19Êó• (ÈÄ±‰∏Ä) 16ÊôÇ01ÂàÜ18Áßí
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ sl
Á®ãÂºè 'sl' ÁõÆÂâçÂ∞öÊú™ÂÆâË£ù„ÄÇ ÊÇ®ÂèØ‰ª•Áî±Ëº∏ÂÖ•‰ª•‰∏ãÂÖßÂÆπÂÆâË£ùÔºö
sudo apt-get install sl
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ ls
[0m[01;34mimgs[0m  index.html  [01;34mlibs[0m  plugin.xml  README.md  [01;34mscripts[0m  [01;34mtest[0m  [01;34mtools[0m  typescript  [01;34mwww[0m
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K
cÔºöÁÑ°Ê≠§Êåá‰ª§
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K[K
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K[K
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ ls
[0m[01;34mimgs[0m  index.html  [01;34mlibs[0m  plugin.xml  README.md  [01;34mscripts[0m  [01;34mtest[0m  [01;34mtools[0m  typescript  [01;34mwww[0m
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K[K
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K[K
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K[K
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K[K
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ ls
[0m[01;34mimgs[0m  index.html  [01;34mlibs[0m  plugin.xml  README.md  [01;34mscripts[0m  [01;34mtest[0m  [01;34mtools[0m  typescript  [01;34mwww[0m
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ ls
[0m[01;34mimgs[0m  index.html  [01;34mlibs[0m  plugin.xml  README.md  [01;34mscripts[0m  [01;34mtest[0m  [01;34mtools[0m  typescript  [01;34mwww[0m
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ ls
[0m[01;34mimgs[0m  index.html  [01;34mlibs[0m  plugin.xml  README.md  [01;34mscripts[0m  [01;34mtest[0m  [01;34mtools[0m  typescript  [01;34mwww[0m
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ if[K[K
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K[K
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K[K
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K[K
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K[Kcd[K[Kcd www/
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls
index.html  wechat.js
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ cd[K[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls
index.html  wechat.js
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ifconfig
em1       Link encap:Ethernet  HWaddr 30:0e:d5:0d:82:87  
          inet addr:172.16.39.139  Bcast:172.16.255.255  Mask:255.255.0.0
          inet6 addr: fe80::320e:d5ff:fe0d:8287/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:626808 errors:0 dropped:29216 overruns:0 frame:0
          TX packets:153758 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:185390822 (185.3 MB)  TX bytes:31140384 (31.1 MB)
          Interrupt:20 Memory:f7c00000-f7c20000 

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:4597725 errors:0 dropped:0 overruns:0 frame:0
          TX packets:4597725 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:765577648 (765.5 MB)  TX bytes:765577648 (765.5 MB)

]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ n[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls
index.html  wechat.js
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ cd[K[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ c[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ cd[K[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls[K[Kvim wechat.js 
[?1049h[?1h=[2;1H‚ñΩ[6n[1;1H  [1;1H[1;56r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[56;1H"wechat.js" 155L, 4607C[>c[2;5H[36mvar[m WeChat = [36mfunction[m()[36m{[3;8Hvar[m [33mself[m = [36mthis[m ;[4;8H[33mself[m.deviceid = [33mnull[m ;[6;8Hconsole.log([31m"construct"[m);[7;8H[33mself[m.channels = [36m{[m[8;12Hwechatevent :cordova.addWindowEventHandler([31m"wechatevent"[m)[9;8H[36m}[m;[11;8H[34m//rigister Event[m[12;8H[33mself[m.channels[36m[[m[31m"wechatevent"[m[36m][m.onHasSubscribersChange = WeChat.onHasSubscribersChangeTEST;[14;8H[34m//getdiveid[m[15;8H[33mself[m.getDeviceID( [36mfunction[m(id)[36m{[m[16;12H[33mself[m.deviceid = id ;[17;8H[36m}[m);[19;5H[36m}[m;[21;5H[34m//listen  deviceready auto start[m
    WeChat.onHasSubscribersChangeTEST = [36mfunction[m() [36m{[m[23;9Hconsole.log([31m"onHasSubscribersChangeTEST"[m);[24;9Hcordova.exec(wechat._status, wechat._error, [31m"WeChat"[m , [31m"start"[m , [36m[][m ) ;
    [36m}[m;[27;5HWeChat.prototype._status = [36mfunction[m(info)[36m{[m[28;9Hconsole.log([31m"_status"[m);[29;9H[34m//emit Event[m[30;9Hcordova.fireWindowEvent([31m"wechatevent"[m, info);
    [36m}[m;[33;5HWeChat.prototype._error = [36mfunction[m(e) [36m{[m[34;9Hconsole.log([31m"_error"[m);[35;9Hconsole.log([31m"Error initializing WeChat: "[m + e);
    [36m}[m;[38;5H[34m//sendBroadcast[m
    WeChat.prototype.sendBroadcast = [36mfunction[m(arg0 ,successCallback , errorCallback)[36m{[m[40;9Hcordova.exec(successCallback, errorCallback, [31m"WeChat"[m , [31m"sendBroadcast"[m , [36m[[marg0[36m][m ) ;
    [36m}[m;[43;5H[34m//hand start reciever[m
    WeChat.prototype.start = [36mfunction[m()[36m{[m[45;9Hcordova.exec(wechat._status, wechat._error, [31m"WeChat"[m , [31m"start"[m , [36m[][m ) ;
    [36m}[m[48;5H[34m//stop reciever[m
    WeChat.prototype.stop = [36mfunction[m()[36m{[m[50;9Hcordova.exec( [33mnull[m, [33mnull[m, [31m"WeChat"[m , [31m"stop"[m , [36m[][m ) ;
    [36m}[m;[53;5H[34m//initConn[m
    WeChat.prototype.initConn = [36mfunction[m( arg0 )[36m{[m[55;9Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"initConn"[m , [36m[[marg0[36m][m);[56;190H1,0-1[8CÈ†ÇÁ´Ø[1;1H[?12l[?25hP+q436f\P+q6b75\P+q6b64\P+q6b72\P+q6b6c\P+q2332\P+q2334\P+q2569\P+q2a37\P+q6b31\[?25l[27m[m[H[2J[1;5HWeChat.prototype.initConn = [36mfunction[m( arg0 )[36m{[m[2;9Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"initConn"[m , [36m[[marg0[36m][m);
    [36m}[m[5;5H[34m//connection[m
    WeChat.prototype.connect = [36mfunction[m()[36m{
[m    [36m}[m[9;5H[34m//disconnection[m
    WeChat.prototype.disconnect = [36mfunction[m()[36m{[m[11;13Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"disconnect"[m , [36m[][m);
    [36m}[m[14;5H[34m//subscribe[m
    WeChat.prototype.subscribe = [36mfunction[m(arg0)[36m{[m[16;9Harg0.device = [31m"mobile"[m;[17;9Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"subscribe"[m , [36m[[marg0[36m][m);
    [36m}[m[20;5H[34m//unsubscribe[m
    WeChat.prototype.unsubscribe = [36mfunction[m(arg0)[36m{[m[22;9Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"unsubscribe"[m , [36m[[marg0[36m][m);
    [36m}[m[25;5H[34m//send[m
    WeChat.prototype.send = [36mfunction[m(arg0)[36m{[m[27;9Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"send"[m , [36m[[marg0[36m][m);
    [36m}[m[30;5H[34m//notify[m
    WeChat.prototype.notify = [36mfunction[m(arg0)[36m{[m[32;13Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"notify"[m , [36m[[marg0[36m][m);
    [36m}[m[35;5H[34m//loopback[m
    WeChat.prototype.loopback = [36mfunction[m(arg0)[36m{[m[37;13Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"loopback"[m , [36m[[marg0[36m][m);
    [36m}[m[40;5H[34m//saveconf[m
    WeChat.prototype.saveconf = [36mfunction[m(arg0)[36m{[m[42;9Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"saveconf"[m , [36m[[marg0[36m][m);
    [36m}[m[45;5H[34m//saveDB[m
    WeChat.prototype.savedb = [36mfunction[m(arg0)[36m{[m[47;13Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"savedb"[m , [36m[[marg0[36m][m);
    [36m}[m[50;5H[34m//querydbdate[m
    WeChat.prototype.querydbdate = [36mfunction[m(arg0 ,successCallback,errorCallback)[36m{[m[52;13H[34m//arg0.starttime = this.fmt(arg0.starttime);[53;13H//arg0.endtime = this.fmt( arg0.endtime );[m[54;13Hcordova.exec( successCallback , errorCallback , [31m"WeChat"[m, [31m"querydbdate"[m , [36m[[marg0[36m][m);
    [36m}[m[56;190H54,5[10C53%[1;5H[?12l[?25h[?25l[27m[m[H[2J[2;5H[36mvar[m WeChat = [36mfunction[m()[36m{[3;8Hvar[m [33mself[m = [36mthis[m ;[4;8H[33mself[m.deviceid = [33mnull[m ;[6;8Hconsole.log([31m"construct"[m);[7;8H[33mself[m.channels = [36m{[m[8;12Hwechatevent :cordova.addWindowEventHandler([31m"wechatevent"[m)[9;8H[36m}[m;[11;8H[34m//rigister Event[m[12;8H[33mself[m.channels[36m[[m[31m"wechatevent"[m[36m][m.onHasSubscribersChange = WeChat.onHasSubscribersChangeTEST;[14;8H[34m//getdiveid[m[15;8H[33mself[m.getDeviceID( [36mfunction[m(id)[36m{[m[16;12H[33mself[m.deviceid = id ;[17;8H[36m}[m);[19;5H[36m}[m;[21;5H[34m//listen  deviceready auto start[m
    WeChat.onHasSubscribersChangeTEST = [36mfunction[m() [36m{[m[23;9Hconsole.log([31m"onHasSubscribersChangeTEST"[m);[24;9Hcordova.exec(wechat._status, wechat._error, [31m"WeChat"[m , [31m"start"[m , [36m[][m ) ;
    [36m}[m;[27;5HWeChat.prototype._status = [36mfunction[m(info)[36m{[m[28;9Hconsole.log([31m"_status"[m);[29;9H[34m//emit Event[m[30;9Hcordova.fireWindowEvent([31m"wechatevent"[m, info);
    [36m}[m;[33;5HWeChat.prototype._error = [36mfunction[m(e) [36m{[m[34;9Hconsole.log([31m"_error"[m);[35;9Hconsole.log([31m"Error initializing WeChat: "[m + e);
    [36m}[m;[38;5H[34m//sendBroadcast[m
    WeChat.prototype.sendBroadcast = [36mfunction[m(arg0 ,successCallback , errorCallback)[36m{[m[40;9Hcordova.exec(successCallback, errorCallback, [31m"WeChat"[m , [31m"sendBroadcast"[m , [36m[[marg0[36m][m ) ;
    [36m}[m;[43;5H[34m//hand start reciever[m
    WeChat.prototype.start = [36mfunction[m()[36m{[m[45;9Hcordova.exec(wechat._status, wechat._error, [31m"WeChat"[m , [31m"start"[m , [36m[][m ) ;
    [36m}[m[48;5H[34m//stop reciever[m
    WeChat.prototype.stop = [36mfunction[m()[36m{[m[50;9Hcordova.exec( [33mnull[m, [33mnull[m, [31m"WeChat"[m , [31m"stop"[m , [36m[][m ) ;
    [36m}[m;[53;5H[34m//initConn[m
    WeChat.prototype.initConn = [36mfunction[m( arg0 )[36m{[m[55;9Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"initConn"[m , [36m[[marg0[36m][m);[56;190H55,9[9CÈ†ÇÁ´Ø[55;9H[?12l[?25h[?25l[?12l[?25h[?25l[1;55r[55;1H
[1;56r[53;49H[36m[46m{[55;5H}[m[56;190H[K[56;190H56,5[11C1%[55;5H[?12l[?25h[?25l[1;55r[55;1H
[1;56r[52;49H[36m{[54;5H}[m[56;190H[K[56;190H57,0-1[9C2%[55;1H[?12l[?25h[?25l[27m[m[H[2J[1;5H[36m}[m[3;5H[34m//connection[m
    WeChat.prototype.connect = [36mfunction[m()[36m{
[m    [36m}[m[7;5H[34m//disconnection[m
    WeChat.prototype.disconnect = [36mfunction[m()[36m{[m[9;13Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"disconnect"[m , [36m[][m);
    [36m}[m[12;5H[34m//subscribe[m
    WeChat.prototype.subscribe = [36mfunction[m(arg0)[36m{[m[14;9Harg0.device = [31m"mobile"[m;[15;9Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"subscribe"[m , [36m[[marg0[36m][m);
    [36m}[m[18;5H[34m//unsubscribe[m
    WeChat.prototype.unsubscribe = [36mfunction[m(arg0)[36m{[m[20;9Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"unsubscribe"[m , [36m[[marg0[36m][m);
    [36m}[m[23;5H[34m//send[m
    WeChat.prototype.send = [36mfunction[m(arg0)[36m{[m[25;9Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"send"[m , [36m[[marg0[36m][m);
    [36m}[m[28;5H[34m//notify[m
    WeChat.prototype.notify = [36mfunction[m(arg0)[36m{[m[30;13Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"notify"[m , [36m[[marg0[36m][m);
    [36m}[m[33;5H[34m//loopback[m
    WeChat.prototype.loopback = [36mfunction[m(arg0)[36m{[m[35;13Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"loopback"[m , [36m[[marg0[36m][m);
    [36m}[m[38;5H[34m//saveconf[m
    WeChat.prototype.saveconf = [36mfunction[m(arg0)[36m{[m[40;9Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"saveconf"[m , [36m[[marg0[36m][m);
    [36m}[m[43;5H[34m//saveDB[m
    WeChat.prototype.savedb = [36mfunction[m(arg0)[36m{[m[45;13Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"savedb"[m , [36m[[marg0[36m][m);
    [36m}[m[48;5H[34m//querydbdate[m
    WeChat.prototype.querydbdate = [36mfunction[m(arg0 ,successCallback,errorCallback)[36m{[m[50;13H[34m//arg0.starttime = this.fmt(arg0.starttime);[51;13H//arg0.endtime = this.fmt( arg0.endtime );[m[52;13Hcordova.exec( successCallback , errorCallback , [31m"WeChat"[m, [31m"querydbdate"[m , [36m[[marg0[36m][m);
    [36m}[m[55;5H[34m//deviceid[m[56;190H56,5[10C55%[1;5H[?12l[?25h[?25l[56;191H7,0-1[2;1H[?12l[?25h[?25l[56;191H8,5  [3;5H[?12l[?25h[?25l[27m[m[H[2J[2;5H[34m//deviceid[m
    WeChat.prototype.getDeviceID = [36mfunction[m(successCallback )[36m{[m[4;13Hcordova.exec( successCallback , [33mnull[m , [31m"WeChat"[m, [31m"deviceid"[m , [36m[][m);
    [36m}[m[7;5H[34m//isodatefmt[m
    WeChat.prototype.fmt = [36mfunction[m(strdate)[36m{[9;9Hvar[m dstr = strdate.replace([31m' '[m,[31m'T'[m) + [31m".000Z"[m;[10;9H[33mreturn[m dstr;
    [36m}[m[13;5H[34m//register[m
    WeChat.prototype.register = [36mfunction[m( arg0 , errorCallback)[36m{[m[15;9Hcordova.exec( [33mnull[m , errorCallback , [31m"WeChat"[m, [31m"register"[m , [36m[[marg0[36m][m);
    [36m}[m[18;5H[34m//rereaded[m
    WeChat.prototype.rereaded = [36mfunction[m( arg0 )[36m{[m[20;9Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"rereaded"[m , [36m[[marg0[36m][m);
    [36m}[m[23;5HWeChat.prototype.contacts = [36mfunction[m( successCallback , errorCallback)[36m{[m[24;9Hcordova.exec( successCallback , errorCallback , [31m"WeChat"[m, [31m"contacts"[m , [36m[][m);
    [36m}[m[27;5HWeChat.prototype.existOwner = [36mfunction[m( successCallback)[36m{[m[28;9Hcordova.exec( successCallback , [33mnull[m , [31m"WeChat"[m, [31m"existOwner"[m , [36m[][m);
    [36m}[m[31;5HWeChat.prototype.getInviteChann = [36mfunction[m( sid , tid)[36m{[32;9Hvar[m max = ( sid > tid) ?  sid : tid;[33;9H[36mvar[m min = ( sid < tid) ?  sid : tid;[34;9H[33mreturn[m max + [31m"@"[m + min ;
    [36m}[m[37;5HWeChat.prototype.unreadchat = [36mfunction[m( successCallback , errorCallback)[36m{[m[38;9Hcordova.exec( successCallback , errorCallback , [31m"WeChat"[m, [31m"unreadchat"[m , [36m[][m);
    [36m}[m[41;5HWeChat.prototype.ask = [36mfunction[m( arg0 )[36m{[m[42;13Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"ask"[m , [36m[[m arg0 [36m][m);
    [36m}[45;5Hvar[m wechat = [33mnew[m WeChat();
    module.exports = wechat;

[1m[34m~                                                                                                                                                                                                              [49;1H~                                                                                                                                                                                                              [50;1H~                                                                                                                                                                                                              [51;1H~                                                                                                                                                                                                              [52;1H~                                                                                                                                                                                                              [53;1H~                                                                                                                                                                                                              [54;1H~                                                                                                                                                                                                              [55;1H~                                                                                                                                                                                                              [m[56;190H109,0-1      Â∫ïÁ´Ø[1;1H[?12l[?25h[?25l[56;191H10,1  [2;1H[?12l[?25h[?25l[56;192H1[3;1H[?12l[?25h[?25l[56;192H2[4;1H[?12l[?25h[?25l[56;192H3[5;1H[?12l[?25h[?25l[56;192H4,0-1[6;1H[?12l[?25h[?25l[56;192H5,1  [7;1H[?12l[?25h[?25l[56;192H6[8;1H[?12l[?25h[?25l[56;192H7[9;1H[?12l[?25h[?25l[56;192H8[10;1H[?12l[?25h[?25l[56;192H9[11;1H[?12l[?25h[?25l[56;191H20,0-1[12;1H[?12l[?25h[?25l[56;192H1,1  [13;1H[?12l[?25h[?25l[56;192H2[14;1H[?12l[?25h[?25l[56;192H3[15;1H[?12l[?25h[?25l[56;192H4[16;1H[?12l[?25h[?25l[56;192H5,0-1[17;1H[?12l[?25h[?25l[56;192H6,1  [18;1H[?12l[?25h[?25l[56;192H7[19;1H[?12l[?25h[?25l[56;192H8[20;1H[?12l[?25h[?25l[56;192H9[21;1H[?12l[?25h[?25l[56;191H30,0-1[22;1H[?12l[?25h[?25l[56;192H1,1  [23;1H[?12l[?25h[?25l[56;192H2[24;1H[?12l[?25h[?25l[56;192H3[25;1H[?12l[?25h[?25l[56;192H4,0-1[26;1H[?12l[?25h[?25l[56;192H5,1  [27;1H[?12l[?25h[?25l[56;192H6[28;1H[?12l[?25h[?25l[56;192H7[29;1H[?12l[?25h[?25l[56;192H8,0-1[30;1H[?12l[?25h[?25l[56;192H9,1  [31;1H[?12l[?25h[?25l[56;191H40[32;1H[?12l[?25h[?25l[56;192H1[33;1H[?12l[?25h[?25l[56;192H2[34;1H[?12l[?25h[?25l[56;192H3[35;1H[?12l[?25h[?25l[56;192H4,0-1[36;1H[?12l[?25h[?25l[56;192H5,1  [37;1H[?12l[?25h[?25l[56;192H6[38;1H[?12l[?25h[?25l[56;192H7[39;1H[?12l[?25h[?25l[56;192H8,0-1[40;1H[?12l[?25h[?25l[56;192H9,1  [41;1H[?12l[?25h[?25l[56;191H50[42;1H[?12l[?25h[?25l[56;192H1[43;1H[?12l[?25h[?25l[56;192H2,0-1[44;1H[?12l[?25h[?25l[56;192H3,1  [45;1H[?12l[?25h[?25l[56;192H4[46;1H[?12l[?25h[?25l[56;192H5,0-1[47;1H[?12l[?25h[?25l[56;192H4,1  [46;1H[?12l[?25h[?25l[56;192H3[45;1H[?12l[?25h[?25l[56;192H4[46;1H[?12l[?25h[?25l[56;192H5,0-1[47;1H[?12l[?25h[?25l[56;192H4,1  [46;1H[?12l[?25h[?25l[56;192H3[45;1H[?12l[?25h[?25l[56;192H4[46;1H[?12l[?25h[?25l[56;192H5,0-1[47;1H[?12l[?25h[?25l[56;190H[K[56;1H:[?12l[?25hq[?25l[?12l[?25h[?25l[56;1H[K[56;1H[?1l>[?12l[?25h[?1049l]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ c[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls
index.html  wechat.js
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls
index.html  wechat.js
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ cd[K[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls
index.html  wechat.js
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls
index.html  wechat.js
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ c[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls
index.html  wechat.js
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ cd[K[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ l[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls
index.html  wechat.js
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls
index.html  wechat.js
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls
index.html  wechat.js
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls
index.html  wechat.js
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls
index.html  wechat.js
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ vim 
[?1049h[?1h=[2;1H‚ñΩ[6n[1;1H  [1;1H[1;56r[?12;25h[?12l[?25h[27m[m[H[2J[>c[?25l[2;1H[1m[34m~                                                                                                                                                                                                              [3;1H~                                                                                                                                                                                                              [4;1H~                                                                                                                                                                                                              [5;1H~                                                                                                                                                                                                              [6;1H~                                                                                                                                                                                                              [7;1H~                                                                                                                                                                                                              [8;1H~                                                                                                                                                                                                              [9;1H~                                                                                                                                                                                                              [10;1H~                                                                                                                                                                                                              [11;1H~                                                                                                                                                                                                              [12;1H~                                                                                                                                                                                                              [13;1H~                                                                                                                                                                                                              [14;1H~                                                                                                                                                                                                              [15;1H~                                                                                                                                                                                                              [16;1H~                                                                                                                                                                                                              [17;1H~                                                                                                                                                                                                              [18;1H~                                                                                                                                                                                                              [19;1H~                                                                                                                                                                                                              [20;1H~                                                                                                                                                                                                              [21;1H~                                                                                                                                                                                                              [22;1H~                                                                                                                                                                                                              [23;1H~                                                                                                                                                                                                              [24;1H~                                                                                                                                                                                                              [25;1H~                                                                                                                                                                                                              [26;1H~                                                                                                                                                                                                              [27;1H~                                                                                                                                                                                                              [28;1H~                                                                                                                                                                                                              [29;1H~                                                                                                                                                                                                              [30;1H~                                                                                                                                                                                                              [31;1H~                                                                                                                                                                                                              [32;1H~                                                                                                                                                                                                              [33;1H~                                                                                                                                                                                                              [34;1H~                                                                                                                                                                                                              [35;1H~                                                                                                                                                                                                              [36;1H~                                                                                                                                                                                                              [37;1H~                                                                                                                                                                                                              [38;1H~                                                                                                                                                                                                              [39;1H~                                                                                                                                                                                                              [40;1H~                                                                                                                                                                                                              [41;1H~                                                                                                                                                                                                              [42;1H~                                                                                                                                                                                                              [43;1H~                                                                                                                                                                                                              [44;1H~                                                                                                                                                                                                              [45;1H~                                                                                                                                                                                                              [46;1H~                                                                                                                                                                                                              [47;1H~                                                                                                                                                                                                              [48;1H~                                                                                                                                                                                                              [49;1H~                                                                                                                                                                                                              [50;1H~                                                                                                                                                                                                              [51;1H~                                                                                                                                                                                                              [52;1H~                                                                                                                                                                                                              [53;1H~                                                                                                                                                                                                              [54;1H~                                                                                                                                                                                                              [55;1H~                                                                                                                                                                                                              [m[56;190H0,0-1[8CÂÖ®ÈÉ®[22;96HVIM - Vi IMproved[24;98HÁâàÊú¨   7.4.52[25;90HÁ∂≠Ë≠∑ËÄÖ: Bram Moolenaar et al.[26;79H‰øÆÊîπËÄÖÁÇ∫pkg-vim-maintainers@lists.alioth.debian.org[27;88HVim ÁÇ∫ÂèØËá™Áî±Êï£‰ΩàÁöÑÈñãÊîæÂéüÂßãÁ¢ºËªüÈ´î[29;93HË´ãÂπ´Âä©ÁÉèÂπ≤ÈÅîÁöÑÂèØÊÜêÂ≠©Á´•![30;83HÈÄ≤‰∏ÄÊ≠•Ë™™ÊòéË´ãËº∏ÂÖ•          :help iccf[34m<Enter>[m[32;79HË¶ÅÈõ¢ÈñãË´ãËº∏ÂÖ•                  :q[34m<Enter>[m            [33;79HÁ∑ö‰∏äË™™ÊòéË´ãËº∏ÂÖ•                :help[34m<Enter>[m         [34;79HÊñ∞ÁâàÊú¨Ë≥áË®äË´ãËº∏ÂÖ•              :help version7[34m<Enter>[1;1H[?12l[?25hP+q436f\P+q6b75\P+q6b64\P+q6b72\P+q6b6c\P+q2332\P+q2334\P+q2569\P+q2a37\P+q6b31\[?25l[m[56;190H[K[56;1H:[?12l[?25hq[?25l[?12l[?25h[?25l[56;1H[K[56;1H[?1l>[?12l[?25h[?1049l]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ cd[K[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ l
lÔºöÁÑ°Ê≠§Êåá‰ª§
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ cd[K[K[K]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ cd[K[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ cd[K[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls
index.html  wechat.js
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ cd[K[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ cd[K[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ c[Kc[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ca[K[Kca tinde[K[K[K[K[K[K[K[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ cat index.html 
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Hello World</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
</head>

<body>
<div class="app">
    <div id="deviceready" class="blink">
        <p class="event listening">Connecting to Device</p>
        <p class="event received">Device is Ready</p>
    </div>
</div>


<input type="text" id="m_id"  value="s001">
<input type="text" id="custom_name"  value="alex" >
<button type="button" onclick="existOwner()" >existOwner</button>
<button type="button" onclick="register()" >register</button>
<button type="button" onclick="delRegister()" >delRegister</button>
<button type="button" onclick="contacts()" >contacts</button>
<button type="button" onclick="unreadchat()" >unreadchat</button>
<BR>

<hr>
<button type="button" onclick="initConn()" >initConn</button>
<button type="button" onclick="saveconf()" >saveconf</button>
<button type="button" onclick="disconnect()" >disconnect</button>

<hr>
channel:<input type="text" id="ichannel"  value="s002">
sid:<input type="text" id="isid"  value="s001">
tid:<input type="text" id="itid"  value="s002">
<button type="button" onclick="sendInvite()" >Invite</button><BR>

<hr>
channel:<input type="text" id="xchannel"  value="">
<button type="button" onclick="subscribe()" >subscribe</button>
<button type="button" onclick="unsubscribe()" >unsubscribe</button>
<button type="button" onclick="send()" >send</button>
<button type="button" onclick="querydbdate()" >querydbdate</button>
<button type="button" onclick="getDeviceID()" >getDeviceID</button>
data:<input type="text" id="xmsg"  value="mymessage">
<BR>
<button type="button" onclick="javascript:$('#message').empty()" >clear</button>


<div id="message"></div>

<script type="text/javascript" src="cordova.js"></script>
<script type="text/javascript" src="js/index.js"></script>

<script>

   document.addEventListener("deviceready", onDeviceReady, false);
   function onDeviceReady() {
       window.addEventListener("wechatevent", OnEBusEvent, false);
   };

   //custom event  recived  message
   function OnEBusEvent( obj ){  //JSONObject
       //check
       console.log( obj );

       //do something here
       for (var i=0 ; i <  obj.data.length ; i++){
            $("#message").append("<p>" + obj.data[i].data  +"</p>");
       }


        alert("unread not write sqlite");
       //write sqlite and server are readed;
       wechat.rereaded( obj );
   };


   //start reciever
   function start(){
      wechat.start();
   }

   //stop reciever
   function stop(){
      wechat.stop();
   }

   //sendBrodcast
   function sendBroadcast(msg){
       var obj = {data: msg};
       wechat.sendBroadcast(obj ,
           function(data){
               alert(data);
           },
           function(data){
               alert(data);
       });
   }

   //init
   function initConn(){
        var obj = { serverip: "serverip",
                    port: 3002,
                    notifyTarget: "tw.com.bais.wechat.MainActivity",
                    notifyTicker: "message",
                    //notifyTitle: "news",
                    hasVibrate: false,
                    hasSound: true,
                    hasSaveEl: false,
                    key: "1234567890mobile" };
        wechat.initConn(obj);
   }

   //connect error msg
   function wechatOnConnectError(data){
        alert( data.msg );
   }

   //save config
   function saveconf(){
        var obj = { serverip: "serverip",
                    port: 3002,
                    notifyTarget: "tw.com.bais.wechat.MainActivity",
                    notifyTicker: "message",
                    notifyTitle: "news",
                    hasVibrate: false,
                    hasSound: true,
                    hasSaveEl: false,
                    key: "1234567890mobile" };
        wechat.saveconf( obj );
   }

   //connnect
   //disconnect
   function disconnect(){
        wechat.disconnect();
   }

   //subscribe
   function subscribe(){
        var channMsg = { channel: $("#idata").val() , tid: $("#m_id").val() };
        wechat.subscribe( channMsg );
   }

   //unsubscribe
   function unsubscribe(){
       var channMsg = { channel: mydeviceid };
       wechat.unsubscribe( channMsg );
   }

   //send
   function send(){
        var newchann =  wechat.getInviteChann($("#isid").val() , $("#itid").val()  )
        var pack = {  device:"desktop|mobile", channel: newchann , sid: $("#isid").val() ,tid: $("#itid").val() , action:"send",  category:"user" ,data:$("#xmsg").val() };
        wechat.send( pack );
   }

   /*notify equipment
   function notify(){
        var pack = { channel: mydeviceid , device:"mobile", action:"notify", sid:"user00", tid: mydeviceid  ,category:"", data:"alex:john:what is this" };
        console.log(pack);
        wechat.notify( pack );
   }*/

   //querydbdate
   function querydbdate(){
        var pack = { channel:"s009@s001" ,offset:0, limit:10 };
        console.log(pack);
        wechat.querydbdate( pack , function(data){
            console.log( data );

        } , function(err){
            alert("eror");
        });
   }

   //deviceid
   function getDeviceID(){
        $("#message").append("<p>deviceid:" + wechat.deviceid  +"</p>");
   }

   function existOwner(){
        wechat.existOwner(function(data){
            var existowner = ( data == 1) ? true : false;
            $("#message").append("<p>hasOwner:" + existowner  +"</p>");
        });
   }

   //register
   function register(){
       //corps: -1 mobile_owner , action:"insert|update|delete"
       var obj = { action: "insert" ,m_id: $("#m_id").val(), custom_name: $("#custom_name").val() , corps: -1 } ;
       console.log( obj );

       //reigiter(jobj , errorcallback)
       wechat.register( obj , function(){
            alert("error");
       });
   }

   function delRegister(){
       //action:"insert|update|delete" , corps:-1 is owner
       //var obj = { action: "update" ,m_id: $("#m_id").val(), custom_name: "aaaa" , corps: -1 } ;
       var obj = { action: "delete" ,m_id: $("#m_id").val()} ;
       console.log( obj );

       //reigiter(jobj , errorcallback)
       wechat.register( obj , function(){
            alert("error");
       });
   }


   //sendInvite
   function sendInvite(){
        var newchann =  wechat.getInviteChann($("#isid").val() , $("#itid").val()  )

        var pack = {  device: "desktop|mobile" , channel:$("#ichannel").val() , sid: $("#isid").val() ,tid: $("#itid").val() , action:"invite", data: newchann  };
        console.log( pack );
        wechat.send( pack );

        var channMsg = { channel: newchann  };
        console.log( channMsg)
        wechat.subscribe( channMsg );
   }

   //recive invited
   function wechatInviteRecived( obj ){
        console.log( "wechatInvite");
        for (var i=0 ; i< obj.data.length ; i++){
            var xsid = obj.data[i].sid;
            var xtid = obj.data[i].tid;
            var xcustom_name = obj.data[i].custom_name;
            var xcontact_id = obj.data[i].contact_id;
            alert( "Invite " + xsid );

            // answer yes
            //subscirbe
            var newchann = wechat.getInviteChann( xsid, xtid);
            var channMsg = { channel: newchann };
            wechat.subscribe( channMsg );

            var mobj = { action:"insert" , m_id: xsid , custom_name: xcustom_name  , contact_id: xcontact_id };
            console.log( mobj );
            //reigiter(jobj , errorcallback)
            wechat.register( mobj , function(){
                alert("error");
            });
        }



       //register************************************************************************
       //var mobj = { action:"insert" , m_id: xsid , custom_name: xcustom_name  , contact_id: xcontact_id };
       //console.log( mobj );
       //reigiter(jobj , errorcallback)
       //wechat.register( mobj , function(){
       //     alert("error");
       //});

       //sendloopabck*********************************************************************
       //var robj = { data: [ obj ] };
       //wechat.loopback( robj );
   }

   //wechatRecieve
   function wechatRecieve( data ){
        console.log( data );
   }

   //contacts
   function contacts(){
        wechat.contacts( function(obj){
            console.log(obj);
            for (var i=0 ; i <  obj.data.length ; i++){
                $("#message").append("<p>m_id:" + obj.data[i].m_id + ",custom_name:"+  obj.data[i].custom_name +"</p>");
            }
        });
   }


   //unreadchat
   function unreadchat(){
        wechat.unreadchat( function(data){
            console.log( data );
        } , function(){
            alert("search error")
        });
   }

//wechat.loopback( obj );


</script>

</body>
</html>
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls
index.html  wechat.js
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ cd[K[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls
index.html  wechat.js
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ cd[K[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ cd[K[Kcd ..
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ ls
[0m[01;34mimgs[0m  index.html  [01;34mlibs[0m  plugin.xml  README.md  [01;34mscripts[0m  [01;34mtest[0m  [01;34mtools[0m  typescript  [01;34mwww[0m
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K[Kca[K[Kcat typescript 
ÂëΩ‰ª§Á®øÂïüÂãïÊñº 2016Âπ¥09Êúà19Êó• (ÈÄ±‰∏Ä) 16ÊôÇ01ÂàÜ18Áßí
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ sl
Á®ãÂºè 'sl' ÁõÆÂâçÂ∞öÊú™ÂÆâË£ù„ÄÇ ÊÇ®ÂèØ‰ª•Áî±Ëº∏ÂÖ•‰ª•‰∏ãÂÖßÂÆπÂÆâË£ùÔºö
sudo apt-get install sl
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ ls
[0m[01;34mimgs[0m  index.html  [01;34mlibs[0m  plugin.xml  README.md  [01;34mscripts[0m  [01;34mtest[0m  [01;34mtools[0m  typescript  [01;34mwww[0m
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K
cÔºöÁÑ°Ê≠§Êåá‰ª§
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K[K
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K[K
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ ls
[0m[01;34mimgs[0m  index.html  [01;34mlibs[0m  plugin.xml  README.md  [01;34mscripts[0m  [01;34mtest[0m  [01;34mtools[0m  typescript  [01;34mwww[0m
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K[K
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K[K
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K[K
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K[K
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ ls
[0m[01;34mimgs[0m  index.html  [01;34mlibs[0m  plugin.xml  README.md  [01;34mscripts[0m  [01;34mtest[0m  [01;34mtools[0m  typescript  [01;34mwww[0m
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ ls
[0m[01;34mimgs[0m  index.html  [01;34mlibs[0m  plugin.xml  README.md  [01;34mscripts[0m  [01;34mtest[0m  [01;34mtools[0m  typescript  [01;34mwww[0m
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ ls
[0m[01;34mimgs[0m  index.html  [01;34mlibs[0m  plugin.xml  README.md  [01;34mscripts[0m  [01;34mtest[0m  [01;34mtools[0m  typescript  [01;34mwww[0m
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ if[K[K
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K[K
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K[K
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K[K
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K[Kcd[K[Kcd www/
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls
index.html  wechat.js
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ cd[K[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls
index.html  wechat.js
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ifconfig
em1       Link encap:Ethernet  HWaddr 30:0e:d5:0d:82:87  
          inet addr:172.16.39.139  Bcast:172.16.255.255  Mask:255.255.0.0
          inet6 addr: fe80::320e:d5ff:fe0d:8287/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:626808 errors:0 dropped:29216 overruns:0 frame:0
          TX packets:153758 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:185390822 (185.3 MB)  TX bytes:31140384 (31.1 MB)
          Interrupt:20 Memory:f7c00000-f7c20000 

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:4597725 errors:0 dropped:0 overruns:0 frame:0
          TX packets:4597725 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:765577648 (765.5 MB)  TX bytes:765577648 (765.5 MB)

]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ n[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls
index.html  wechat.js
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ cd[K[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ c[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ cd[K[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls[K[Kvim wechat.js 
[?1049h[?1h=[2;1H‚ñΩ[6n[1;1H  [1;1H[1;56r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[56;1H"wechat.js" 155L, 4607C[>c[2;5H[36mvar[m WeChat = [36mfunction[m()[36m{[3;8Hvar[m [33mself[m = [36mthis[m ;[4;8H[33mself[m.deviceid = [33mnull[m ;[6;8Hconsole.log([31m"construct"[m);[7;8H[33mself[m.channels = [36m{[m[8;12Hwechatevent :cordova.addWindowEventHandler([31m"wechatevent"[m)[9;8H[36m}[m;[11;8H[34m//rigister Event[m[12;8H[33mself[m.channels[36m[[m[31m"wechatevent"[m[36m][m.onHasSubscribersChange = WeChat.onHasSubscribersChangeTEST;[14;8H[34m//getdiveid[m[15;8H[33mself[m.getDeviceID( [36mfunction[m(id)[36m{[m[16;12H[33mself[m.deviceid = id ;[17;8H[36m}[m);[19;5H[36m}[m;[21;5H[34m//listen  deviceready auto start[m
    WeChat.onHasSubscribersChangeTEST = [36mfunction[m() [36m{[m[23;9Hconsole.log([31m"onHasSubscribersChangeTEST"[m);[24;9Hcordova.exec(wechat._status, wechat._error, [31m"WeChat"[m , [31m"start"[m , [36m[][m ) ;
    [36m}[m;[27;5HWeChat.prototype._status = [36mfunction[m(info)[36m{[m[28;9Hconsole.log([31m"_status"[m);[29;9H[34m//emit Event[m[30;9Hcordova.fireWindowEvent([31m"wechatevent"[m, info);
    [36m}[m;[33;5HWeChat.prototype._error = [36mfunction[m(e) [36m{[m[34;9Hconsole.log([31m"_error"[m);[35;9Hconsole.log([31m"Error initializing WeChat: "[m + e);
    [36m}[m;[38;5H[34m//sendBroadcast[m
    WeChat.prototype.sendBroadcast = [36mfunction[m(arg0 ,successCallback , errorCallback)[36m{[m[40;9Hcordova.exec(successCallback, errorCallback, [31m"WeChat"[m , [31m"sendBroadcast"[m , [36m[[marg0[36m][m ) ;
    [36m}[m;[43;5H[34m//hand start reciever[m
    WeChat.prototype.start = [36mfunction[m()[36m{[m[45;9Hcordova.exec(wechat._status, wechat._error, [31m"WeChat"[m , [31m"start"[m , [36m[][m ) ;
    [36m}[m[48;5H[34m//stop reciever[m
    WeChat.prototype.stop = [36mfunction[m()[36m{[m[50;9Hcordova.exec( [33mnull[m, [33mnull[m, [31m"WeChat"[m , [31m"stop"[m , [36m[][m ) ;
    [36m}[m;[53;5H[34m//initConn[m
    WeChat.prototype.initConn = [36mfunction[m( arg0 )[36m{[m[55;9Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"initConn"[m , [36m[[marg0[36m][m);[56;190H1,0-1[8CÈ†ÇÁ´Ø[1;1H[?12l[?25hP+q436f\P+q6b75\P+q6b64\P+q6b72\P+q6b6c\P+q2332\P+q2334\P+q2569\P+q2a37\P+q6b31\[?25l[27m[m[H[2J[1;5HWeChat.prototype.initConn = [36mfunction[m( arg0 )[36m{[m[2;9Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"initConn"[m , [36m[[marg0[36m][m);
    [36m}[m[5;5H[34m//connection[m
    WeChat.prototype.connect = [36mfunction[m()[36m{
[m    [36m}[m[9;5H[34m//disconnection[m
    WeChat.prototype.disconnect = [36mfunction[m()[36m{[m[11;13Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"disconnect"[m , [36m[][m);
    [36m}[m[14;5H[34m//subscribe[m
    WeChat.prototype.subscribe = [36mfunction[m(arg0)[36m{[m[16;9Harg0.device = [31m"mobile"[m;[17;9Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"subscribe"[m , [36m[[marg0[36m][m);
    [36m}[m[20;5H[34m//unsubscribe[m
    WeChat.prototype.unsubscribe = [36mfunction[m(arg0)[36m{[m[22;9Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"unsubscribe"[m , [36m[[marg0[36m][m);
    [36m}[m[25;5H[34m//send[m
    WeChat.prototype.send = [36mfunction[m(arg0)[36m{[m[27;9Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"send"[m , [36m[[marg0[36m][m);
    [36m}[m[30;5H[34m//notify[m
    WeChat.prototype.notify = [36mfunction[m(arg0)[36m{[m[32;13Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"notify"[m , [36m[[marg0[36m][m);
    [36m}[m[35;5H[34m//loopback[m
    WeChat.prototype.loopback = [36mfunction[m(arg0)[36m{[m[37;13Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"loopback"[m , [36m[[marg0[36m][m);
    [36m}[m[40;5H[34m//saveconf[m
    WeChat.prototype.saveconf = [36mfunction[m(arg0)[36m{[m[42;9Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"saveconf"[m , [36m[[marg0[36m][m);
    [36m}[m[45;5H[34m//saveDB[m
    WeChat.prototype.savedb = [36mfunction[m(arg0)[36m{[m[47;13Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"savedb"[m , [36m[[marg0[36m][m);
    [36m}[m[50;5H[34m//querydbdate[m
    WeChat.prototype.querydbdate = [36mfunction[m(arg0 ,successCallback,errorCallback)[36m{[m[52;13H[34m//arg0.starttime = this.fmt(arg0.starttime);[53;13H//arg0.endtime = this.fmt( arg0.endtime );[m[54;13Hcordova.exec( successCallback , errorCallback , [31m"WeChat"[m, [31m"querydbdate"[m , [36m[[marg0[36m][m);
    [36m}[m[56;190H54,5[10C53%[1;5H[?12l[?25h[?25l[27m[m[H[2J[2;5H[36mvar[m WeChat = [36mfunction[m()[36m{[3;8Hvar[m [33mself[m = [36mthis[m ;[4;8H[33mself[m.deviceid = [33mnull[m ;[6;8Hconsole.log([31m"construct"[m);[7;8H[33mself[m.channels = [36m{[m[8;12Hwechatevent :cordova.addWindowEventHandler([31m"wechatevent"[m)[9;8H[36m}[m;[11;8H[34m//rigister Event[m[12;8H[33mself[m.channels[36m[[m[31m"wechatevent"[m[36m][m.onHasSubscribersChange = WeChat.onHasSubscribersChangeTEST;[14;8H[34m//getdiveid[m[15;8H[33mself[m.getDeviceID( [36mfunction[m(id)[36m{[m[16;12H[33mself[m.deviceid = id ;[17;8H[36m}[m);[19;5H[36m}[m;[21;5H[34m//listen  deviceready auto start[m
    WeChat.onHasSubscribersChangeTEST = [36mfunction[m() [36m{[m[23;9Hconsole.log([31m"onHasSubscribersChangeTEST"[m);[24;9Hcordova.exec(wechat._status, wechat._error, [31m"WeChat"[m , [31m"start"[m , [36m[][m ) ;
    [36m}[m;[27;5HWeChat.prototype._status = [36mfunction[m(info)[36m{[m[28;9Hconsole.log([31m"_status"[m);[29;9H[34m//emit Event[m[30;9Hcordova.fireWindowEvent([31m"wechatevent"[m, info);
    [36m}[m;[33;5HWeChat.prototype._error = [36mfunction[m(e) [36m{[m[34;9Hconsole.log([31m"_error"[m);[35;9Hconsole.log([31m"Error initializing WeChat: "[m + e);
    [36m}[m;[38;5H[34m//sendBroadcast[m
    WeChat.prototype.sendBroadcast = [36mfunction[m(arg0 ,successCallback , errorCallback)[36m{[m[40;9Hcordova.exec(successCallback, errorCallback, [31m"WeChat"[m , [31m"sendBroadcast"[m , [36m[[marg0[36m][m ) ;
    [36m}[m;[43;5H[34m//hand start reciever[m
    WeChat.prototype.start = [36mfunction[m()[36m{[m[45;9Hcordova.exec(wechat._status, wechat._error, [31m"WeChat"[m , [31m"start"[m , [36m[][m ) ;
    [36m}[m[48;5H[34m//stop reciever[m
    WeChat.prototype.stop = [36mfunction[m()[36m{[m[50;9Hcordova.exec( [33mnull[m, [33mnull[m, [31m"WeChat"[m , [31m"stop"[m , [36m[][m ) ;
    [36m}[m;[53;5H[34m//initConn[m
    WeChat.prototype.initConn = [36mfunction[m( arg0 )[36m{[m[55;9Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"initConn"[m , [36m[[marg0[36m][m);[56;190H55,9[9CÈ†ÇÁ´Ø[55;9H[?12l[?25h[?25l[?12l[?25h[?25l[1;55r[55;1H
[1;56r[53;49H[36m[46m{[55;5H}[m[56;190H[K[56;190H56,5[11C1%[55;5H[?12l[?25h[?25l[1;55r[55;1H
[1;56r[52;49H[36m{[54;5H}[m[56;190H[K[56;190H57,0-1[9C2%[55;1H[?12l[?25h[?25l[27m[m[H[2J[1;5H[36m}[m[3;5H[34m//connection[m
    WeChat.prototype.connect = [36mfunction[m()[36m{
[m    [36m}[m[7;5H[34m//disconnection[m
    WeChat.prototype.disconnect = [36mfunction[m()[36m{[m[9;13Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"disconnect"[m , [36m[][m);
    [36m}[m[12;5H[34m//subscribe[m
    WeChat.prototype.subscribe = [36mfunction[m(arg0)[36m{[m[14;9Harg0.device = [31m"mobile"[m;[15;9Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"subscribe"[m , [36m[[marg0[36m][m);
    [36m}[m[18;5H[34m//unsubscribe[m
    WeChat.prototype.unsubscribe = [36mfunction[m(arg0)[36m{[m[20;9Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"unsubscribe"[m , [36m[[marg0[36m][m);
    [36m}[m[23;5H[34m//send[m
    WeChat.prototype.send = [36mfunction[m(arg0)[36m{[m[25;9Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"send"[m , [36m[[marg0[36m][m);
    [36m}[m[28;5H[34m//notify[m
    WeChat.prototype.notify = [36mfunction[m(arg0)[36m{[m[30;13Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"notify"[m , [36m[[marg0[36m][m);
    [36m}[m[33;5H[34m//loopback[m
    WeChat.prototype.loopback = [36mfunction[m(arg0)[36m{[m[35;13Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"loopback"[m , [36m[[marg0[36m][m);
    [36m}[m[38;5H[34m//saveconf[m
    WeChat.prototype.saveconf = [36mfunction[m(arg0)[36m{[m[40;9Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"saveconf"[m , [36m[[marg0[36m][m);
    [36m}[m[43;5H[34m//saveDB[m
    WeChat.prototype.savedb = [36mfunction[m(arg0)[36m{[m[45;13Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"savedb"[m , [36m[[marg0[36m][m);
    [36m}[m[48;5H[34m//querydbdate[m
    WeChat.prototype.querydbdate = [36mfunction[m(arg0 ,successCallback,errorCallback)[36m{[m[50;13H[34m//arg0.starttime = this.fmt(arg0.starttime);[51;13H//arg0.endtime = this.fmt( arg0.endtime );[m[52;13Hcordova.exec( successCallback , errorCallback , [31m"WeChat"[m, [31m"querydbdate"[m , [36m[[marg0[36m][m);
    [36m}[m[55;5H[34m//deviceid[m[56;190H56,5[10C55%[1;5H[?12l[?25h[?25l[56;191H7,0-1[2;1H[?12l[?25h[?25l[56;191H8,5  [3;5H[?12l[?25h[?25l[27m[m[H[2J[2;5H[34m//deviceid[m
    WeChat.prototype.getDeviceID = [36mfunction[m(successCallback )[36m{[m[4;13Hcordova.exec( successCallback , [33mnull[m , [31m"WeChat"[m, [31m"deviceid"[m , [36m[][m);
    [36m}[m[7;5H[34m//isodatefmt[m
    WeChat.prototype.fmt = [36mfunction[m(strdate)[36m{[9;9Hvar[m dstr = strdate.replace([31m' '[m,[31m'T'[m) + [31m".000Z"[m;[10;9H[33mreturn[m dstr;
    [36m}[m[13;5H[34m//register[m
    WeChat.prototype.register = [36mfunction[m( arg0 , errorCallback)[36m{[m[15;9Hcordova.exec( [33mnull[m , errorCallback , [31m"WeChat"[m, [31m"register"[m , [36m[[marg0[36m][m);
    [36m}[m[18;5H[34m//rereaded[m
    WeChat.prototype.rereaded = [36mfunction[m( arg0 )[36m{[m[20;9Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"rereaded"[m , [36m[[marg0[36m][m);
    [36m}[m[23;5HWeChat.prototype.contacts = [36mfunction[m( successCallback , errorCallback)[36m{[m[24;9Hcordova.exec( successCallback , errorCallback , [31m"WeChat"[m, [31m"contacts"[m , [36m[][m);
    [36m}[m[27;5HWeChat.prototype.existOwner = [36mfunction[m( successCallback)[36m{[m[28;9Hcordova.exec( successCallback , [33mnull[m , [31m"WeChat"[m, [31m"existOwner"[m , [36m[][m);
    [36m}[m[31;5HWeChat.prototype.getInviteChann = [36mfunction[m( sid , tid)[36m{[32;9Hvar[m max = ( sid > tid) ?  sid : tid;[33;9H[36mvar[m min = ( sid < tid) ?  sid : tid;[34;9H[33mreturn[m max + [31m"@"[m + min ;
    [36m}[m[37;5HWeChat.prototype.unreadchat = [36mfunction[m( successCallback , errorCallback)[36m{[m[38;9Hcordova.exec( successCallback , errorCallback , [31m"WeChat"[m, [31m"unreadchat"[m , [36m[][m);
    [36m}[m[41;5HWeChat.prototype.ask = [36mfunction[m( arg0 )[36m{[m[42;13Hcordova.exec( [33mnull[m , [33mnull[m , [31m"WeChat"[m, [31m"ask"[m , [36m[[m arg0 [36m][m);
    [36m}[45;5Hvar[m wechat = [33mnew[m WeChat();
    module.exports = wechat;

[1m[34m~                                                                                                                                                                                                              [49;1H~                                                                                                                                                                                                              [50;1H~                                                                                                                                                                                                              [51;1H~                                                                                                                                                                                                              [52;1H~                                                                                                                                                                                                              [53;1H~                                                                                                                                                                                                              [54;1H~                                                                                                                                                                                                              [55;1H~                                                                                                                                                                                                              [m[56;190H109,0-1      Â∫ïÁ´Ø[1;1H[?12l[?25h[?25l[56;191H10,1  [2;1H[?12l[?25h[?25l[56;192H1[3;1H[?12l[?25h[?25l[56;192H2[4;1H[?12l[?25h[?25l[56;192H3[5;1H[?12l[?25h[?25l[56;192H4,0-1[6;1H[?12l[?25h[?25l[56;192H5,1  [7;1H[?12l[?25h[?25l[56;192H6[8;1H[?12l[?25h[?25l[56;192H7[9;1H[?12l[?25h[?25l[56;192H8[10;1H[?12l[?25h[?25l[56;192H9[11;1H[?12l[?25h[?25l[56;191H20,0-1[12;1H[?12l[?25h[?25l[56;192H1,1  [13;1H[?12l[?25h[?25l[56;192H2[14;1H[?12l[?25h[?25l[56;192H3[15;1H[?12l[?25h[?25l[56;192H4[16;1H[?12l[?25h[?25l[56;192H5,0-1[17;1H[?12l[?25h[?25l[56;192H6,1  [18;1H[?12l[?25h[?25l[56;192H7[19;1H[?12l[?25h[?25l[56;192H8[20;1H[?12l[?25h[?25l[56;192H9[21;1H[?12l[?25h[?25l[56;191H30,0-1[22;1H[?12l[?25h[?25l[56;192H1,1  [23;1H[?12l[?25h[?25l[56;192H2[24;1H[?12l[?25h[?25l[56;192H3[25;1H[?12l[?25h[?25l[56;192H4,0-1[26;1H[?12l[?25h[?25l[56;192H5,1  [27;1H[?12l[?25h[?25l[56;192H6[28;1H[?12l[?25h[?25l[56;192H7[29;1H[?12l[?25h[?25l[56;192H8,0-1[30;1H[?12l[?25h[?25l[56;192H9,1  [31;1H[?12l[?25h[?25l[56;191H40[32;1H[?12l[?25h[?25l[56;192H1[33;1H[?12l[?25h[?25l[56;192H2[34;1H[?12l[?25h[?25l[56;192H3[35;1H[?12l[?25h[?25l[56;192H4,0-1[36;1H[?12l[?25h[?25l[56;192H5,1  [37;1H[?12l[?25h[?25l[56;192H6[38;1H[?12l[?25h[?25l[56;192H7[39;1H[?12l[?25h[?25l[56;192H8,0-1[40;1H[?12l[?25h[?25l[56;192H9,1  [41;1H[?12l[?25h[?25l[56;191H50[42;1H[?12l[?25h[?25l[56;192H1[43;1H[?12l[?25h[?25l[56;192H2,0-1[44;1H[?12l[?25h[?25l[56;192H3,1  [45;1H[?12l[?25h[?25l[56;192H4[46;1H[?12l[?25h[?25l[56;192H5,0-1[47;1H[?12l[?25h[?25l[56;192H4,1  [46;1H[?12l[?25h[?25l[56;192H3[45;1H[?12l[?25h[?25l[56;192H4[46;1H[?12l[?25h[?25l[56;192H5,0-1[47;1H[?12l[?25h[?25l[56;192H4,1  [46;1H[?12l[?25h[?25l[56;192H3[45;1H[?12l[?25h[?25l[56;192H4[46;1H[?12l[?25h[?25l[56;192H5,0-1[47;1H[?12l[?25h[?25l[56;190H[K[56;1H:[?12l[?25hq[?25l[?12l[?25h[?25l[56;1H[K[56;1H[?1l>[?12l[?25h[?1049l]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ c[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls
index.html  wechat.js
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls
index.html  wechat.js
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ cd[K[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls
index.html  wechat.js
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls
index.html  wechat.js
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ c[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls
index.html  wechat.js
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ cd[K[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ l[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls
index.html  wechat.js
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls
index.html  wechat.js
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls
index.html  wechat.js
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls
index.html  wechat.js
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls
index.html  wechat.js
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ vim 
[?1049h[?1h=[2;1H‚ñΩ[6n[1;1H  [1;1H[1;56r[?12;25h[?12l[?25h[27m[m[H[2J[>c[?25l[2;1H[1m[34m~                                                                                                                                                                                                              [3;1H~                                                                                                                                                                                                              [4;1H~                                                                                                                                                                                                              [5;1H~                                                                                                                                                                                                              [6;1H~                                                                                                                                                                                                              [7;1H~                                                                                                                                                                                                              [8;1H~                                                                                                                                                                                                              [9;1H~                                                                                                                                                                                                              [10;1H~                                                                                                                                                                                                              [11;1H~                                                                                                                                                                                                              [12;1H~                                                                                                                                                                                                              [13;1H~                                                                                                                                                                                                              [14;1H~                                                                                                                                                                                                              [15;1H~                                                                                                                                                                                                              [16;1H~                                                                                                                                                                                                              [17;1H~                                                                                                                                                                                                              [18;1H~                                                                                                                                                                                                              [19;1H~                                                                                                                                                                                                              [20;1H~                                                                                                                                                                                                              [21;1H~                                                                                                                                                                                                              [22;1H~                                                                                                                                                                                                              [23;1H~                                                                                                                                                                                                              [24;1H~                                                                                                                                                                                                              [25;1H~                                                                                                                                                                                                              [26;1H~                                                                                                                                                                                                              [27;1H~                                                                                                                                                                                                              [28;1H~                                                                                                                                                                                                              [29;1H~                                                                                                                                                                                                              [30;1H~                                                                                                                                                                                                              [31;1H~                                                                                                                                                                                                              [32;1H~                                                                                                                                                                                                              [33;1H~                                                                                                                                                                                                              [34;1H~                                                                                                                                                                                                              [35;1H~                                                                                                                                                                                                              [36;1H~                                                                                                                                                                                                              [37;1H~                                                                                                                                                                                                              [38;1H~                                                                                                                                                                                                              [39;1H~                                                                                                                                                                                                              [40;1H~                                                                                                                                                                                                              [41;1H~                                                                                                                                                                                                              [42;1H~                                                                                                                                                                                                              [43;1H~                                                                                                                                                                                                              [44;1H~                                                                                                                                                                                                              [45;1H~                                                                                                                                                                                                              [46;1H~                                                                                                                                                                                                              [47;1H~                                                                                                                                                                                                              [48;1H~                                                                                                                                                                                                              [49;1H~                                                                                                                                                                                                              [50;1H~                                                                                                                                                                                                              [51;1H~                                                                                                                                                                                                              [52;1H~                                                                                                                                                                                                              [53;1H~                                                                                                                                                                                                              [54;1H~                                                                                                                                                                                                              [55;1H~                                                                                                                                                                                                              [m[56;190H0,0-1[8CÂÖ®ÈÉ®[22;96HVIM - Vi IMproved[24;98HÁâàÊú¨   7.4.52[25;90HÁ∂≠Ë≠∑ËÄÖ: Bram Moolenaar et al.[26;79H‰øÆÊîπËÄÖÁÇ∫pkg-vim-maintainers@lists.alioth.debian.org[27;88HVim ÁÇ∫ÂèØËá™Áî±Êï£‰ΩàÁöÑÈñãÊîæÂéüÂßãÁ¢ºËªüÈ´î[29;93HË´ãÂπ´Âä©ÁÉèÂπ≤ÈÅîÁöÑÂèØÊÜêÂ≠©Á´•![30;83HÈÄ≤‰∏ÄÊ≠•Ë™™ÊòéË´ãËº∏ÂÖ•          :help iccf[34m<Enter>[m[32;79HË¶ÅÈõ¢ÈñãË´ãËº∏ÂÖ•                  :q[34m<Enter>[m            [33;79HÁ∑ö‰∏äË™™ÊòéË´ãËº∏ÂÖ•                :help[34m<Enter>[m         [34;79HÊñ∞ÁâàÊú¨Ë≥áË®äË´ãËº∏ÂÖ•              :help version7[34m<Enter>[1;1H[?12l[?25hP+q436f\P+q6b75\P+q6b64\P+q6b72\P+q6b6c\P+q2332\P+q2334\P+q2569\P+q2a37\P+q6b31\[?25l[m[56;190H[K[56;1H:[?12l[?25hq[?25l[?12l[?25h[?25l[56;1H[K[56;1H[?1l>[?12l[?25h[?1049l]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ cd[K[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ l
lÔºöÁÑ°Ê≠§Êåá‰ª§
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ cd[K[K[K]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ cd[K[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ cd[K[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ls
index.html  wechat.js
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ cd[K[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ cd[K[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ c[Kc[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ 
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ ca[K[Kca tinde[K[K[K[K[K[K[K[K
]0;xdna@axPC: ~/git/wechat2/wwwxdna@axPC:~/git/wechat2/www$ cat index.html 
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Hello World</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
</head>

<body>
<div class="app">
    <div id="deviceready" class="blink">
        <p class="event listening">Connecting to Device</p>
        <p class="event received">Device is Ready</p>
    </div>
</div>


<input type="text" id="m_id"  value="s001">
<input type="text" id="custom_name"  value="alex" >
<button type="button" onclick="existOwner()" >existOwner</button>
<button type="button" onclick="register()" >register</button>
<button type="button" onclick="delRegister()" >delRegister</button>
<button type="button" onclick="contacts()" >contacts</button>
<button type="button" onclick="unreadchat()" >unreadchat</button>
<BR>

<hr>
<button type="button" onclick="initConn()" >initConn</button>
<button type="button" onclick="saveconf()" >saveconf</button>
<button type="button" onclick="disconnect()" >disconnect</button>

<hr>
channel:<input type="text" id="ichannel"  value="s002">
sid:<input type="text" id="isid"  value="s001">
tid:<input type="text" id="itid"  value="s002">
<button type="button" onclick="sendInvite()" >Invite</button><BR>

<hr>
channel:<input type="text" id="xchannel"  value="">
<button type="button" onclick="subscribe()" >subscribe</button>
<button type="button" onclick="unsubscribe()" >unsubscribe</button>
<button type="button" onclick="send()" >send</button>
<button type="button" onclick="querydbdate()" >querydbdate</button>
<button type="button" onclick="getDeviceID()" >getDeviceID</button>
data:<input type="text" id="xmsg"  value="mymessage">
<BR>
<button type="button" onclick="javascript:$('#message').empty()" >clear</button>


<div id="message"></div>

<script type="text/javascript" src="cordova.js"></script>
<script type="text/javascript" src="js/index.js"></script>

<script>

   document.addEventListener("deviceready", onDeviceReady, false);
   function onDeviceReady() {
       window.addEventListener("wechatevent", OnEBusEvent, false);
   };

   //custom event  recived  message
   function OnEBusEvent( obj ){  //JSONObject
       //check
       console.log( obj );

       //do something here
       for (var i=0 ; i <  obj.data.length ; i++){
            $("#message").append("<p>" + obj.data[i].data  +"</p>");
       }


        alert("unread not write sqlite");
       //write sqlite and server are readed;
       wechat.rereaded( obj );
   };


   //start reciever
   function start(){
      wechat.start();
   }

   //stop reciever
   function stop(){
      wechat.stop();
   }

   //sendBrodcast
   function sendBroadcast(msg){
       var obj = {data: msg};
       wechat.sendBroadcast(obj ,
           function(data){
               alert(data);
           },
           function(data){
               alert(data);
       });
   }

   //init
   function initConn(){
        var obj = { serverip: "serverip",
                    port: 3002,
                    notifyTarget: "tw.com.bais.wechat.MainActivity",
                    notifyTicker: "message",
                    //notifyTitle: "news",
                    hasVibrate: false,
                    hasSound: true,
                    hasSaveEl: false,
                    key: "1234567890mobile" };
        wechat.initConn(obj);
   }

   //connect error msg
   function wechatOnConnectError(data){
        alert( data.msg );
   }

   //save config
   function saveconf(){
        var obj = { serverip: "serverip",
                    port: 3002,
                    notifyTarget: "tw.com.bais.wechat.MainActivity",
                    notifyTicker: "message",
                    notifyTitle: "news",
                    hasVibrate: false,
                    hasSound: true,
                    hasSaveEl: false,
                    key: "1234567890mobile" };
        wechat.saveconf( obj );
   }

   //connnect
   //disconnect
   function disconnect(){
        wechat.disconnect();
   }

   //subscribe
   function subscribe(){
        var channMsg = { channel: $("#idata").val() , tid: $("#m_id").val() };
        wechat.subscribe( channMsg );
   }

   //unsubscribe
   function unsubscribe(){
       var channMsg = { channel: mydeviceid };
       wechat.unsubscribe( channMsg );
   }

   //send
   function send(){
        var newchann =  wechat.getInviteChann($("#isid").val() , $("#itid").val()  )
        var pack = {  device:"desktop|mobile", channel: newchann , sid: $("#isid").val() ,tid: $("#itid").val() , action:"send",  category:"user" ,data:$("#xmsg").val() };
        wechat.send( pack );
   }

   /*notify equipment
   function notify(){
        var pack = { channel: mydeviceid , device:"mobile", action:"notify", sid:"user00", tid: mydeviceid  ,category:"", data:"alex:john:what is this" };
        console.log(pack);
        wechat.notify( pack );
   }*/

   //querydbdate
   function querydbdate(){
        var pack = { channel:"s009@s001" ,offset:0, limit:10 };
        console.log(pack);
        wechat.querydbdate( pack , function(data){
            console.log( data );

        } , function(err){
            alert("eror");
        });
   }

   //deviceid
   function getDeviceID(){
        $("#message").append("<p>deviceid:" + wechat.deviceid  +"</p>");
   }

   function existOwner(){
        wechat.existOwner(function(data){
            var existowner = ( data == 1) ? true : false;
            $("#message").append("<p>hasOwner:" + existowner  +"</p>");
        });
   }

   //register
   function register(){
       //corps: -1 mobile_owner , action:"insert|update|delete"
       var obj = { action: "insert" ,m_id: $("#m_id").val(), custom_name: $("#custom_name").val() , corps: -1 } ;
       console.log( obj );

       //reigiter(jobj , errorcallback)
       wechat.register( obj , function(){
            alert("error");
       });
   }

   function delRegister(){
       //action:"insert|update|delete" , corps:-1 is owner
       //var obj = { action: "update" ,m_id: $("#m_id").val(), custom_name: "aaaa" , corps: -1 } ;
       var obj = { action: "delete" ,m_id: $("#m_id").val()} ;
       console.log( obj );

       //reigiter(jobj , errorcallback)
       wechat.register( obj , function(){
            alert("error");
       });
   }


   //sendInvite
   function sendInvite(){
        var newchann =  wechat.getInviteChann($("#isid").val() , $("#itid").val()  )

        var pack = {  device: "desktop|mobile" , channel:$("#ichannel").val() , sid: $("#isid").val() ,tid: $("#itid").val() , action:"invite", data: newchann  };
        console.log( pack );
        wechat.send( pack );

        var channMsg = { channel: newchann  };
        console.log( channMsg)
        wechat.subscribe( channMsg );
   }

   //recive invited
   function wechatInvit]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 2R1;3409;0c2R1;3409;0cs[K[K
2R1ÔºöÁÑ°Ê≠§Êåá‰ª§
3409ÔºöÁÑ°Ê≠§Êåá‰ª§
0c2R1ÔºöÁÑ°Ê≠§Êåá‰ª§

3409ÔºöÁÑ°Ê≠§Êåá‰ª§
0ÔºöÁÑ°Ê≠§Êåá‰ª§
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ ls
[0m[01;34mimgs[0m  index.html  [01;34mlibs[0m  plugin.xml  README.md  [01;34mscripts[0m  [01;34mtest[0m  [01;34mtools[0m  typescript  [01;34mwww[0m
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K[K
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K[Kcd[K[K
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K[Kcd sc[K[Kscripts/
]0;xdna@axPC: ~/git/wechat2/scriptsxdna@axPC:~/git/wechat2/scripts$ ls
afterBuild.js
]0;xdna@axPC: ~/git/wechat2/scriptsxdna@axPC:~/git/wechat2/scripts$ cd[K[Kcd[K[Kca[K[Kcat afterBuild.js 
#!/usr/bin/env node
module.exports = function(context) {
	console.log("plugin install");
};
]0;xdna@axPC: ~/git/wechat2/scriptsxdna@axPC:~/git/wechat2/scripts$ ls[K[K
]0;xdna@axPC: ~/git/wechat2/scriptsxdna@axPC:~/git/wechat2/scripts$ ls
afterBuild.js
]0;xdna@axPC: ~/git/wechat2/scriptsxdna@axPC:~/git/wechat2/scripts$ cd ..
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ ls
[0m[01;34mimgs[0m  index.html  [01;34mlibs[0m  plugin.xml  README.md  [01;34mscripts[0m  [01;34mtest[0m  [01;34mtools[0m  typescript  [01;34mwww[0m
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K[K
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ ls
[0m[01;34mimgs[0m  index.html  [01;34mlibs[0m  plugin.xml  README.md  [01;34mscripts[0m  [01;34mtest[0m  [01;34mtools[0m  typescript  [01;34mwww[0m
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K[K
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ ls
[0m[01;34mimgs[0m  index.html  [01;34mlibs[0m  plugin.xml  README.md  [01;34mscripts[0m  [01;34mtest[0m  [01;34mtools[0m  typescript  [01;34mwww[0m
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ ls
[0m[01;34mimgs[0m  index.html  [01;34mlibs[0m  plugin.xml  README.md  [01;34mscripts[0m  [01;34mtest[0m  [01;34mtools[0m  typescript  [01;34mwww[0m
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ 
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K[K
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K[K
]0;xdna@axPC: ~/git/wechat2xdna@axPC:~/git/wechat2$ cd[K[Kcd [K[K[Kcd tools/
]0;xdna@axPC: ~/git/wechat2/toolsxdna@axPC:~/git/wechat2/tools$ ls
build2_jar.sh
]0;xdna@axPC: ~/git/wechat2/toolsxdna@axPC:~/git/wechat2/tools$ 
]0;xdna@axPC: ~/git/wechat2/toolsxdna@axPC:~/git/wechat2/tools$ c[Kca[K[Kc[Kat build2_jar.sh [1@c
#!/bin/bash
./gradlew clean
./gradlew build --stacktrace --debug

#ÈÄ≤ÂÖ•Ëº∏Âá∫ÁõÆÈåÑ
rm -rf output
mkdir output
cd output

#Ê∏ÖÁ©∫Ëº∏Âá∫ÁõÆÈåÑ
rm -rf  *

#ÂâµÂª∫Ëº∏Âá∫Â≠êÁõÆÈåÑ
mkdir temp
mkdir release

#ÂÆöÁæ©sdkÁâàÊú¨Ëôü
package=tw.wechat.bais
packpackage="ebus"
version="3.0.0"
is_cordova=true

#split package
IFS='.' read -ra NAMES <<< "$package"

#build‰∏ãclassesÂà∞tempÁõÆÈåÑ‰∏≠
cd temp
if $is_cordova; then
    #tw.com.bais.wechat
    cp -a  ../../build/intermediates/classes/debug/${NAMES[0]}  .

    #delete files that i would not need.
    for f in $(find . -type f |grep -E "BuildConfig.class|R.class|R\\$");do
        rm -rf  $f
    done

    #create META-INF and insert
    mkdir META-INF
    echo "Manifest-Version: 1.0" > META-INF/MANIFEST.MF
    echo "Created-By: 1.1.0_00 (Oracle Corporation)" >> META-INF/MANIFEST.MF
    echo "" >> META-INF/MANIFEST.MF
fi


#Â£ìÁ∏ÆÊâÄÊúâreleaseÁâàÊú¨ÁöÑclassÊñá‰ª∂Âà∞‰∏ÄÂÄãjarÂåÖ‰∏≠
jar -cvfM ${packpackage}-${version}.jar .

#Êã∑Ë≤ùÊñá‰ª∂
mv ${packpackage}-${version}.jar ../release

]0;xdna@axPC: ~/git/wechat2/toolsxdna@axPC:~/git/wechat2/tools$ cd[K[K
]0;xdna@axPC: ~/git/wechat2/toolsxdna@axPC:~/git/wechat2/tools$ ls
build2_jar.sh
]0;xdna@axPC: ~/git/wechat2/toolsxdna@axPC:~/git/wechat2/tools$ 
]0;xdna@axPC: ~/git/wechat2/toolsxdna@axPC:~/git/wechat2/tools$ 
]0;xdna@axPC: ~/git/wechat2/toolsxdna@axPC:~/git/wechat2/tools$ cd[K[K
]0;xdna@axPC: ~/git/wechat2/toolsxdna@axPC:~/git/wechat2/tools$ 
]0;xdna@axPC: ~/git/wechat2/toolsxdna@axPC:~/git/wechat2/tools$ ls
build2_jar.sh
]0;xdna@axPC: ~/git/wechat2/toolsxdna@axPC:~/git/wechat2/tools$ cd[K[K
]0;xdna@axPC: ~/git/wechat2/toolsxdna@axPC:~/git/wechat2/tools$ 
]0;xdna@axPC: ~/git/wechat2/toolsxdna@axPC:~/git/wechat2/tools$ 
]0;xdna@axPC: ~/git/wechat2/toolsxdna@axPC:~/git/wechat2/tools$ ls
build2_jar.sh
]0;xdna@axPC: ~/git/wechat2/toolsxdna@axPC:~/git/wechat2/tools$ cd[K[Ktail /var/lof[K[K[Klog/noapp/noapp.log 
[Mon Sep 19 2016 08:53:16 GMT+0800 (CST)] INFO mq io test

/opt/noapp/node_modules/mongoose/node_modules/mongodb/lib/server.js:242
        process.nextTick(function() { throw err; })
                                      ^
Error: connect ECONNREFUSED 127.0.0.1:27017
    at Object.exports._errnoException (util.js:870:11)
    at exports._exceptionWithHostPort (util.js:893:20)
    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1061:14)
error: Forever detected script exited with code: 1
]0;xdna@axPC: ~/git/wechat2/toolsxdna@axPC:~/git/wechat2/tools$ 
]0;xdna@axPC: ~/git/wechat2/toolsxdna@axPC:~/git/wechat2/tools$ 
]0;xdna@axPC: ~/git/wechat2/toolsxdna@axPC:~/git/wechat2/tools$ cd[K[Ktail /var/log/noapp/noapp.log [C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C-f
[Mon Sep 19 2016 08:53:16 GMT+0800 (CST)] INFO mq io test

/opt/noapp/node_modules/mongoose/node_modules/mongodb/lib/server.js:242
        process.nextTick(function() { throw err; })
                                      ^
Error: connect ECONNREFUSED 127.0.0.1:27017
    at Object.exports._errnoException (util.js:870:11)
    at exports._exceptionWithHostPort (util.js:893:20)
    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1061:14)
error: Forever detected script exited with code: 1
^C
]0;xdna@axPC: ~/git/wechat2/toolsxdna@axPC:~/git/wechat2/tools$ 
]0;xdna@axPC: ~/git/wechat2/toolsxdna@axPC:~/git/wechat2/tools$ ifconfig
em1       Link encap:Ethernet  HWaddr 30:0e:d5:0d:82:87  
          inet addr:172.16.39.139  Bcast:172.16.255.255  Mask:255.255.0.0
          inet6 addr: fe80::320e:d5ff:fe0d:8287/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:716225 errors:0 dropped:34499 overruns:0 frame:0
          TX packets:181993 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:204253507 (204.2 MB)  TX bytes:41375883 (41.3 MB)
          Interrupt:20 Memory:f7c00000-f7c20000 

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:5404639 errors:0 dropped:0 overruns:0 frame:0
          TX packets:5404639 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:848061022 (848.0 MB)  TX bytes:848061022 (848.0 MB)

]0;xdna@axPC: ~/git/wechat2/toolsxdna@axPC:~/git/wechat2/tools$ cd[K[Kcd[K[Kcd[K[Kcd[K[K
]0;xdna@axPC: ~/git/wechat2/toolsxdna@axPC:~/git/wechat2/tools$ cd[K[Kcd
]0;xdna@axPC: ~xdna@axPC:~$ 
]0;xdna@axPC: ~xdna@axPC:~$ lsc
ÁÑ° 'lsc' ÈÄôÂÄãÊåá‰ª§Ôºå‰ΩÜÊòØÊúâ 23 ÂÄãÊåá‰ª§ÂæàËøë‰ºº
lscÔºöÁÑ°Ê≠§Êåá‰ª§
]0;xdna@axPC: ~xdna@axPC:~$ d[K
]0;xdna@axPC: ~xdna@axPC:~$ 
]0;xdna@axPC: ~xdna@axPC:~$ 
]0;xdna@axPC: ~xdna@axPC:~$ 
]0;xdna@axPC: ~xdna@axPC:~$ 
]0;xdna@axPC: ~xdna@axPC:~$ ls
[0m[01;34m1[0m        [01;34mandroid-studio[0m         [01;34mArduino[0m                    [01;34mdb[0m         examples.desktop  jsonData.txt    [01;32mnaver_line[0m     [01;34mpubilc_html[0m  [01;34mrmailbais[0m         [01;31mSuperMario.7z[0m  [01;34musernoise[0m       [01;31mwinbk.7z[0m
[01;34m2[0m        [01;34mandroid-studio.old[0m     [01;34mbin[0m                        [01;34mdeja-dup[0m   [01;34mfileman[0m           [01;34mmainland[0m        [01;32mnaver_line.bk[0m  [01;34mPublic[0m       [01;34mrpi_image[0m         [01;34mTemplates[0m      [01;34mVideos[0m          [01;34mworkspace[0m
[01;34m3[0m        [01;34mAndroidStudioProjects[0m  [01;34mblender276[0m                 [01;34mDesktop[0m    [01;31mfileview.tar.gz[0m   [01;34mmedialslave[0m     [01;34mnoapp[0m          [01;34mQt[0m           [01;34mrpi_mnt[0m           test.html      [01;34mVirtualBox VMs[0m
[01;34m4[0m        [01;34mARCH[0m                   [01;32mbuild-qtandroid-native.py[0m  [01;34mDocuments[0m  getwechat.sh      [01;34mMusic[0m           [01;34mPictures[0m       [01;34mremail[0m       [01;34mSenchaArchitect3[0m  [01;34mtmp[0m            [01;34mVM[0m
[01;34mAndroid[0m  [01;34marduino[0m                [01;34mcn.ebais.com.cn[0m            [01;34mDownloads[0m  [01;34mgit[0m               [01;31mmychat2.tar.gz[0m  [01;34mProjects[0m       [01;34mremaster[0m     [01;34msublime[0m           tomfilter      wechat
]0;xdna@axPC: ~xdna@axPC:~$ 
]0;xdna@axPC: ~xdna@axPC:~$ cd[K[Kc[K
]0;xdna@axPC: ~xdna@axPC:~$ cd[K[K
]0;xdna@axPC: ~xdna@axPC:~$ 
]0;xdna@axPC: ~xdna@axPC:~$ ls
[0m[01;34m1[0m        [01;34mandroid-studio[0m         [01;34mArduino[0m                    [01;34mdb[0m         examples.desktop  jsonData.txt    [01;32mnaver_line[0m     [01;34mpubilc_html[0m  [01;34mrmailbais[0m         [01;31mSuperMario.7z[0m  [01;34musernoise[0m       [01;31mwinbk.7z[0m
[01;34m2[0m        [01;34mandroid-studio.old[0m     [01;34mbin[0m                        [01;34mdeja-dup[0m   [01;34mfileman[0m           [01;34mmainland[0m        [01;32mnaver_line.bk[0m  [01;34mPublic[0m       [01;34mrpi_image[0m         [01;34mTemplates[0m      [01;34mVideos[0m          [01;34mworkspace[0m
[01;34m3[0m        [01;34mAndroidStudioProjects[0m  [01;34mblender276[0m                 [01;34mDesktop[0m    [01;31mfileview.tar.gz[0m   [01;34mmedialslave[0m     [01;34mnoapp[0m          [01;34mQt[0m           [01;34mrpi_mnt[0m           test.html      [01;34mVirtualBox VMs[0m
[01;34m4[0m        [01;34mARCH[0m                   [01;32mbuild-qtandroid-native.py[0m  [01;34mDocuments[0m  getwechat.sh      [01;34mMusic[0m           [01;34mPictures[0m       [01;34mremail[0m       [01;34mSenchaArchitect3[0m  [01;34mtmp[0m            [01;34mVM[0m
[01;34mAndroid[0m  [01;34marduino[0m                [01;34mcn.ebais.com.cn[0m            [01;34mDownloads[0m  [01;34mgit[0m               [01;31mmychat2.tar.gz[0m  [01;34mProjects[0m       [01;34mremaster[0m     [01;34msublime[0m           tomfilter      wechat
]0;xdna@axPC: ~xdna@axPC:~$ 
]0;xdna@axPC: ~xdna@axPC:~$ 
]0;xdna@axPC: ~xdna@axPC:~$ ls[K[K
]0;xdna@axPC: ~xdna@axPC:~$ cd[K[Kcd[K[Kcd[K[Kcd [K[K[Kcd 4/
]0;xdna@axPC: ~/4xdna@axPC:~/4$ ls
app.js  [0m[01;34mevents[0m  [01;34mlibs[0m  package.json  [01;34mpublic[0m  README.md  [01;34mroutes[0m  sftp-config.json  [01;34mviews[0m
]0;xdna@axPC: ~/4xdna@axPC:~/4$ c
cÔºöÁÑ°Ê≠§Êåá‰ª§
]0;xdna@axPC: ~/4xdna@axPC:~/4$ 
]0;xdna@axPC: ~/4xdna@axPC:~/4$ ls
app.js  [0m[01;34mevents[0m  [01;34mlibs[0m  package.json  [01;34mpublic[0m  README.md  [01;34mroutes[0m